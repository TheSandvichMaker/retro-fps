// Generated by metagen.lua

void shader_ui_heatmap_set_draw_params(rhi_command_list_t *list, ui_heatmap_draw_parameters_t *params)
{
	rhi_set_parameters(list, 0, params, sizeof(*params));
}

#define DF_SHADER_UI_HEATMAP_SOURCE_CODE \
	"// Generated by metagen.lua\n" \
	"\n" \
	"#include \"bindless.hlsli\"\n" \
	"\n" \
	"\n" \
	"	#include \"common.hlsli\"\n" \
	"\n" \
	"	#define R_UI_RECT_BLEND_TEXT     (1 << 0)\n" \
	"	#define R_UI_RECT_HUE_PICKER     (1 << 1)\n" \
	"	#define R_UI_RECT_SAT_VAL_PICKER (1 << 2)\n" \
	"\n" \
	"	struct Rect2\n" \
	"	{\n" \
	"		float2 min;\n" \
	"		float2 max;\n" \
	"	};\n" \
	"\n" \
	"	bool PointInRect(Rect2 rect, float2 p)\n" \
	"	{\n" \
	"		return all(p >= rect.min) && all(p <= rect.max);\n" \
	"	}\n" \
	"\n" \
	"	struct Rect2Fixed\n" \
	"	{\n" \
	"		uint data0;\n" \
	"		uint data1;\n" \
	"	};\n" \
	"\n" \
	"	Rect2 Decode(Rect2Fixed fixed)\n" \
	"	{\n" \
	"		Rect2 result;\n" \
	"		result.min.x = float((fixed.data0 >>  0) & 0xFFFF);// / 4.0;\n" \
	"		result.min.y = float((fixed.data0 >> 16) & 0xFFFF);// / 4.0;\n" \
	"		result.max.x = float((fixed.data1 >>  0) & 0xFFFF);// / 4.0;\n" \
	"		result.max.y = float((fixed.data1 >> 16) & 0xFFFF);// / 4.0;\n" \
	"		return result;\n" \
	"	}\n" \
	"\n" \
	"	struct UIRect\n" \
	"	{\n" \
	"		float2                    p_min;\n" \
	"		float2                    p_max;\n" \
	"		float2                    uv_min;\n" \
	"		float2                    uv_max;\n" \
	"		float4                    roundedness;\n" \
	"		ColorRGBA8                colors[4];\n" \
	"		float                     shadow_radius;\n" \
	"		float                     shadow_amount;\n" \
	"		float                     inner_radius;\n" \
	"		uint                      flags;\n" \
	"		Rect2Fixed                clip_rect;\n" \
	"		df::Resource< Texture2D > texture;\n" \
	"	};\n" \
	"\n" \
	"	struct ui_heatmap_draw_parameters_t\n" \
	"{\n" \
	"	df::Resource< StructuredBuffer< UIRect > > rects;\n" \
	"};\n" \
	"\n" \
	"ConstantBuffer< ui_heatmap_draw_parameters_t > draw : register(b0);\n" \
	"\n" \
	"\n" \
	"	struct VSOut\n" \
	"	{\n" \
	"		float4 pos   : SV_Position;\n" \
	"		uint   id    : INSTANCE_ID;\n" \
	"		float4 color : COLOR;\n" \
	"		float2 uv    : UV;\n" \
	"	};\n" \
	"\n" \
	"	float4 MainPS(VSOut IN) : SV_Target\n" \
	"	{\n" \
	"		UIRect rect = draw.rects.Get()[IN.id];\n" \
	"\n" \
	"		Rect2 clip_rect = Decode(rect.clip_rect);\n" \
	"\n" \
	"		float2 pos = IN.pos.xy;\n" \
	"		pos.y = view.view_size.y - pos.y - 1;\n" \
	"\n" \
	"		if (!PointInRect(clip_rect, pos))\n" \
	"		{\n" \
	"			discard;\n" \
	"		}\n" \
	"\n" \
	"		return float4(1.0 / 255.0f, 0.0f, 0.0f, 1.0f);\n" \
	"	}\n" \
	"\n" \
	"	\n" \
	"\n" \
