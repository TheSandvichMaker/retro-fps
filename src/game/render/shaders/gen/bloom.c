// Generated by metagen.lua

void shader_bloom_set_draw_params(rhi_command_list_t *list, bloom_draw_parameters_t *params)
{
	rhi_validate_texture_srv(params->tex_color, S("bloom_draw_parameters_t::tex_color"), 0);
	rhi_set_parameters(list, 0, params, sizeof(*params));
}

#define DF_SHADER_BLOOM_SOURCE_CODE \
	"// Generated by metagen.lua\n" \
	"\n" \
	"#include \"bindless.hlsli\"\n" \
	"\n" \
	"#include \"common.hlsli\"\n" \
	"\n" \
	"struct bloom_draw_parameters_t\n" \
	"{\n" \
	"	df::Resource< Texture2D< float3 > > tex_color;\n" \
	"	float2 inv_tex_size;\n" \
	"};\n" \
	"\n" \
	"ConstantBuffer< bloom_draw_parameters_t > draw : register(b0);\n" \
	"\n" \
	"\n" \
	"\n" \
	"float4 bloom_blur_ps(FullscreenTriangleOutVS IN) : SV_Target\n" \
	"{\n" \
	"	Texture2D<float3> tex_color    = draw.tex_color.Get();\n" \
	"	float2            inv_tex_size = draw.inv_tex_size;\n" \
	"\n" \
	"	float2 uv = IN.uv;\n" \
	"\n" \
	"	float3 sum = 0.0;\n" \
	"	sum += tex_color.SampleLevel(df::s_linear_border, uv + float2(-0.5, -0.5)*inv_tex_size, 0);\n" \
	"	sum += tex_color.SampleLevel(df::s_linear_border, uv + float2(+0.5, -0.5)*inv_tex_size, 0);\n" \
	"	sum += tex_color.SampleLevel(df::s_linear_border, uv + float2(+0.5, +0.5)*inv_tex_size, 0);\n" \
	"	sum += tex_color.SampleLevel(df::s_linear_border, uv + float2(-0.5, +0.5)*inv_tex_size, 0);\n" \
	"	sum *= 0.25;\n" \
	"\n" \
	"	return float4(sum, 1);\n" \
	"}\n" \
	"\n" \
